#########################################
### HYPRLAND CONFIGURATION (hyprland.conf)
#########################################
# source = ~/.config/hypr/hyprbind.conf
# For detailed information, visit: https://wiki.hyprland.org/Configuring/

#############################
### ENVIRONMENT VARIABLES ###
#############################

# GTK and QT settings
env = GTK_THEME=Adwaita:dark
env = QT_QPA_PLATFORMTHEME,qt5ct
env = QT_QPA_PLATFORMTHEME,qt6ct
env = KDE_COLOR_SCHEME_PATH=/usr/share/color-schemes/BreezeDark.colors
env = QT_QUICK_CONTROLS_STYLE=gtk


# Cursor settings
env = XCURSOR_THEME,Bibata-Modern-DodgerBlue
env = XCURSOR_SIZE,24

# Session information
env = XDG_CURRENT_DESKTOP=Hyprland
env = XDG_SESSION_DESKTOP=Hyprland
env = XDG_SESSION_TYPE=wayland
env = XDG_CONFIG_HOME=~/.config
env = XDG_DATA_HOME=~/.local/share
env = XDG_CACHE_HOME=~/.cache
env = XDG_STATE_HOME=~/.local/state
env = XDG_RUNTIME_DIR=/tmp/hyprland
env = WAYLAND_DISPLAY=wayland-0

# QT/Wayland & Java options
env = QT_WAYLAND_DISABLE_WINDOWDECORATION=1
env = _JAVA_AWT_WM_NONREPARENTING=1
env = _JAVA_OPTIONS=-Dawt.useSystemAAFontSettings=on -Dswing.aatext=true -Dswing.defaultlaf=com.sun.java.swing.plaf.gtk.GTKLookAndFeel

###########################
### MY PROGRAMS SECTION ###
###########################

# Programs you frequently use
$terminal    = kitty
$menu        = rofi -show drun
$browser     = zen-browser
$editor      = nvim
$music       = spotify
$video       = mpv
$filemanager = yazi
$working_dir = ~/.config/hypr/
###########################
### MONITOR CONFIGURATION ###
###########################

# Fallback monitor config
monitor = ,preferred,auto,1

# Home monitor setup:
monitor = HDMI-A-1, 1920x1200@60, 0x0, 1, transform, 1    # Left monitor
#monitor = DP-3, 3440x1440@144, 1200x240, 1, bitdepth, 10, cm, hdr, sdrbrightness, 1.2, sdrsaturation, 0.98         # Center monitor
monitor = DP-3, 3440x1440@144, 1200x240, 1                # Center monitor
monitor = DP-1, 1920x1200@60, 4640x0, 1, transform, 3     # Right monitor

###########################
### AUTOSTART APPLICATIONS ###
###########################
#exec = hyprpaper -c $working_dir/hyprpaper/hyprpaper.conf &
exec-once = systemctl --user start hyprpolkitagent
exec-once = swaync
bind = SUPER, N, exec, swaync-client -t
exec-once = hyprctl dispatch workspace 1
exec = sleep 5; openrgb --profile "/home/bandit/.config/OpenRGB/Hotkeys layout 1.orp"
exec-once = clipse -listen
# Corners getting rounded
exec-once = python ~/.config/hypr/scripts/roundmask.py
# Wallpaper
exec-once = swww-daemon --format xrgb

# Clipse Window Rules
windowrulev2 = float, class:(clipse)
windowrulev2 = size 880 652, class:(clipse)
windowrulev2 = stayfocused, class:(clipse)

###############################
### LOOK AND FEEL CONFIGURATION ###
###############################

general {
    gaps_in     = 5
    gaps_out    = 10
    border_size = 2

    col.active_border   = rgba(AD44CCee) rgba(F089DEee) 45deg
    col.inactive_border = rgba(595959aa)

    resize_on_border = false
    allow_tearing    = false

    layout = dwindle
}

decoration {
    rounding          = 10
    rounding_power    = 2
    active_opacity    = 1.0
    inactive_opacity  = 1.0

    shadow {
        enabled      = true
        range        = 4
        render_power = 3
        color        = rgba(1a1a1aee)
    }

    blur {
        enabled  = true
        size     = 8
        passes   = 4
        vibrancy = 0.1696
    }
}

animations {
    enabled = yes, please :)
    bezier = easeOutQuint,0.23,1,0.32,1
    bezier = easeInOutCubic,0.65,0.05,0.36,1
    bezier = linear,0,0,1,1
    bezier = almostLinear,0.5,0.5,0.75,1.0
    bezier = quick,0.15,0,0.1,1
    bezier = easeOutExpo,0.19,1,0.22,1

    animation = global, 1, 10, default
    animation = border, 1, 5.39, easeOutQuint
    animation = windows, 1, 4.79, easeOutExpo, slide
    animation = windowsOut, 1, 1.49, linear, popin 87%
    animation = fadeIn, 1, 1.73, almostLinear
    animation = fadeOut, 1, 1.46, almostLinear
    animation = fade, 1, 3.03, quick
    animation = layers, 1, 3.81, easeOutQuint
    animation = layersIn, 1, 4, easeOutQuint, fade
    animation = layersOut, 1, 1.5, linear, fade
    animation = fadeLayersIn, 1, 1.79, almostLinear
    animation = fadeLayersOut, 1, 1.39, almostLinear
    animation = workspaces, 1, 4.5, easeOutExpo, slide
}

dwindle {
    pseudotile     = true   # toggle with mainMod + P
    preserve_split = true
}

master {
    new_status = master
}

misc {
    force_default_wallpaper = -1
    disable_hyprland_logo   = false
}

#####################
### INPUT SETTINGS ###
#####################

input {
    kb_layout  = us,dk
    kb_variant =
    kb_model   =
    kb_options = caps:backspace, grp:switch
    kb_rules   =

    follow_mouse = 1
    sensitivity  = 0

    scroll_factor = 0.8

    numlock_by_default = yes

    touchpad {
        natural_scroll = true
    }
}

gestures {
    workspace_swipe = true
}

cursor {
    no_hardware_cursors = true
}

###############################
### KEYBINDINGS CONFIGURATION ###
###############################

bind = SUPER, Z, exec, ~/.local/bin/toggle-waybar

# APPLICATION LAUNCH SHORTCUTS
bind = SUPER, B, exec, $browser
bind = SUPER SHIFT, B, exec, $browser --private-window
bind = SUPER SHIFT, C, exec, hyprpicker -a --format=hex
bind = SUPER SHIFT, S, exec, hyprshot -m region --no-cursor -z -o ~/Pictures/Screenshots/
bind = SUPER SHIFT, RETURN, exec, [float; center; size 1350 900;] $terminal
#bind = SUPER, RETURN, exec, ~/.config/hypr/scripts/launch_floating_adaptive.sh $terminal
bind = SUPER, RETURN, exec, $terminal
bind = SUPER, SPACE, exec, $menu
bind = CTRL ALT, V, exec, env TYPE_CLIPBOARD_DEBUG=1 /home/bandit/.local/bin/type-clipboard

# WINDOW MANAGEMENT
bind = SUPER, Q, killactive,
bind = SUPER, E, exec, xdg-open ~
bind = SUPER, S, togglefloating,
bind = SUPER, D, pseudo,           # Dwindle pseudotile toggle
bind = SUPER, F, togglesplit,        # Flip/togglesplit (dwindle)
bind = SUPER, A, fullscreen,
bind = SUPER, V, exec, $terminal --class clipse -e clipse

# FOCUS AND WINDOW MOVEMENT (Arrow Keys)
bind = SUPER, LEFT, movefocus, l
bind = SUPER, RIGHT, movefocus, r
bind = SUPER, UP, movefocus, u
bind = SUPER, DOWN, movefocus, d

# LOCK SCREEN / SUSPEND
bind = SUPER, L, exec, hyprlock
bind = SUPER ALT, L, exec, systemctl suspend && hyprlock

# POWER MENU
bind = SUPER, P, exec, rofi -show power-menu -modi power-menu:rofi-power-menu

# TOGGLE CINEMA MODE
bind = SUPER, O, exec, $working_dir/scripts/toggle_cinema.sh

# WALLPAPER
bind = SUPER, W, exec, ~/.local/bin/swww-random

# WORKSPACE SWITCHING (Direct)
bind = SUPER, 1, workspace, 1
bind = SUPER, 2, workspace, 2
bind = SUPER, 3, workspace, 3
bind = SUPER, 4, workspace, 4
bind = SUPER, 5, workspace, 5
bind = SUPER, 6, workspace, 6
bind = SUPER, 7, workspace, 7
bind = SUPER, 8, workspace, 8
bind = SUPER, 9, workspace, 9
bind = SUPER, 0, workspace, 10

# MOVE WINDOW TO WORKSPACE
bind = SUPER SHIFT, 1, movetoworkspace, 1
bind = SUPER SHIFT, 2, movetoworkspace, 2
bind = SUPER SHIFT, 3, movetoworkspace, 3
bind = SUPER SHIFT, 4, movetoworkspace, 4
bind = SUPER SHIFT, 5, movetoworkspace, 5
bind = SUPER SHIFT, 6, movetoworkspace, 6
bind = SUPER SHIFT, 7, movetoworkspace, 7
bind = SUPER SHIFT, 8, movetoworkspace, 8
bind = SUPER SHIFT, 9, movetoworkspace, 9
bind = SUPER SHIFT, 0, movetoworkspace, 10

# FIX danish
#bind = SUPER, semicolon, exec, wtype æ
#bind = SUPER, semicolon, exec, ydotool type "æ"
bind = SUPER, semicolon, exec, wl-copy "æ" && wtype -M ctrl v -m ctrl


# MOVE WINDOW TO WORKSPACE (CONDITIONAL)
#bind = SUPER SHIFT, 1, exec, ~/.config/hypr/scripts/conditional_movetoworkspace.sh 1
#bind = SUPER SHIFT, 2, exec, ~/.config/hypr/scripts/conditional_movetoworkspace.sh 2
#bind = SUPER SHIFT, 3, exec, ~/.config/hypr/scripts/conditional_movetoworkspace.sh 3
#bind = SUPER SHIFT, 4, exec, ~/.config/hypr/scripts/conditional_movetoworkspace.sh 4
#bind = SUPER SHIFT, 5, exec, ~/.config/hypr/scripts/conditional_movetoworkspace.sh 5
#bind = SUPER SHIFT, 6, exec, ~/.config/hypr/scripts/conditional_movetoworkspace.sh 6
#bind = SUPER SHIFT, 7, exec, ~/.config/hypr/scripts/conditional_movetoworkspace.sh 7
#bind = SUPER SHIFT, 8, exec, ~/.config/hypr/scripts/conditional_movetoworkspace.sh 8
#bind = SUPER SHIFT, 9, exec, ~/.config/hypr/scripts/conditional_movetoworkspace.sh 9
#bind = SUPER SHIFT, 0, exec, ~/.config/hypr/scripts/conditional_movetoworkspace.sh 10

# WORKSPACE SCROLLING WITH MOUSE SCROLL
bind = SUPER, mouse_down, workspace, e-1
bind = SUPER, mouse_up, workspace, e+1

# WINDOW MOVE / RESIZE WITH MOUSE (Drag)
bindm = SUPER, mouse:272, movewindow
bindm = SUPER, mouse:273, resizewindow
bindm = SUPER, X, movewindow
bindm = SUPER SHIFT, X, resizewindow
# MULTIMEDIA / BRIGHTNESS KEYS
bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindel = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindel = ,XF86MonBrightnessUp, exec, brightnessctl s 10%+
bindel = ,XF86MonBrightnessDown, exec, brightnessctl s 10%-

# PLAYERCTL MEDIA CONTROLS
bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPause, exec, playerctl play-pause
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioPrev, exec, playerctl previous

#######################################
### WINDOW & WORKSPACE RULES SETTINGS ###
#######################################

# Global window rules
windowrulev2 = suppressevent maximize, class:.*
windowrulev2 = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0

# Minecraft start NOT floating; aka floating:0
windowrulev2 = tile, class:^(minecraft)$

# Discord transparency rule
#windowrulev2 = opacity 0.95, class:^(discord)$

# Start specific applications on specific workspaces
# Move Spotify to workspace 10 on launch

windowrulev2 = workspace 1, class:^(zen)$
windowrulev2 = workspace 2, class:^(Cursor)$
windowrulev2 = workspace 3, class:^(steam_app*)$
windowrulev2 = workspace 10, class:^(Spotify)$


# xwaylandvideobridge rules for screensharing issues
windowrulev2 = opacity 0.0 override, class:^(xwaylandvideobridge)$
windowrulev2 = noanim, class:^(xwaylandvideobridge)$
windowrulev2 = noinitialfocus, class:^(xwaylandvideobridge)$
windowrulev2 = maxsize 1 1, class:^(xwaylandvideobridge)$
windowrulev2 = noblur, class:^(xwaylandvideobridge)$

# Rules for your Ollama Program Predictor application
# Uses the custom application ID 'com.bandit.OllamaDmenuApp'

windowrulev2 = float,class:^(com.bandit.OllamaDmenuApp)$             # Make it a floating window
windowrulev2 = center,class:^(com.bandit.OllamaDmenuApp)$            # Center it on the screen
windowrulev2 = noborder,class:^(com.bandit.OllamaDmenuApp)$          # Remove window borders for a cleaner look
#windowrulev2 = size 60% 40%,class:^(com.bandit.OllamaDmenuApp)$      # Set its size to 60% width, 40% height of the monitor
# OR for fixed pixel size (adjust to your monitor and preference):
# --- Optional Rules for a 'dmenu' / scratchpad like behavior ---

# Make it always on top (over other windows)
windowrulev2 = stayfocused,class:^(com.bandit.OllamaDmenuApp)$         # Keep focus when launched (useful for typing immediately)
windowrulev2 = idleinhibit fullscreen,class:^(com.bandit.OllamaDmenuApp)$ # Prevent screen idle/sleep while this window is open
windowrulev2 = noinitialfocus,class:^(com.bandit.OllamaDmenuApp)$    # Prevents it from stealing initial focus (test if this suits your workflow)

# Make Open file start as floating
windowrulev2 = float,title:^(Open File)$


# Update DBus activation environment for Wayland
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP

# Apply blur to Waybar layer (respect alpha to keep rounded corners)
layerrule = blur, waybar

# WORKSPACE ASSIGNMENT TO MONITORS
workspace = 1, monitor:DP-3
workspace = 2, monitor:DP-3
workspace = 3, monitor:DP-3
workspace = 4, monitor:DP-3
workspace = 5, monitor:HDMI-A-1
workspace = 6, monitor:HDMI-A-1
workspace = 7, monitor:HDMI-A-1
workspace = 8, monitor:DP-1
workspace = 9, monitor:DP-1
workspace = 10, monitor:DP-1
